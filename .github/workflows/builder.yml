name: ðŸš€ bara.cpp ESP32 Builder

on:
  push:
    branches: [ main, master, develop ]
    paths:
      - '**.cpp'
      - '**.h'
      - '**.ino'
      - '.github/workflows/**'
  pull_request:
    branches: [ main, master ]
  workflow_dispatch:
    inputs:
      board:
        description: 'ESP32 Board Type'
        required: true
        default: 'esp32dev'
        type: choice
        options:
          - esp32dev
          - esp32-s2
          - esp32-s3
          - esp32-c3
      partition:
        description: 'Partition Scheme'
        required: true
        default: 'default'
        type: choice
        options:
          - default
          - minimal
          - no_ota
          - huge_app

env:
  SKETCH_NAME: bara
  BOARD_TYPE: esp32:esp32:esp32dev
  BUILD_DIR: build
  ARTIFACT_NAME: bara-esp32-firmware

jobs:
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # ðŸ” Pre-Build Validation & Analysis
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  validate:
    name: ðŸ” Code Validation
    runs-on: ubuntu-latest
    
    steps:
      - name: ðŸ“¥ Checkout Repository
        uses: actions/checkout@v4
        with:
          fetch-depth: 0
      
      - name: ðŸ”Ž Check File Structure
        run: |
          echo "ðŸ” Validating project structure..."
          if [ ! -f "bara (1).cpp" ] && [ ! -f "bara.cpp" ]; then
            echo "âŒ Source file not found!"
            exit 1
          fi
          echo "âœ… Source files validated"
      
      - name: ðŸ“Š Code Statistics
        run: |
          echo "ðŸ“Š Generating code statistics..."
          find . -name "*.cpp" -o -name "*.h" | xargs wc -l
          echo "âœ… Statistics generated"

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # ðŸ—ï¸ Build ESP32 Firmware
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  build:
    name: ðŸ—ï¸ Build Firmware
    needs: validate
    runs-on: ubuntu-latest
    strategy:
      matrix:
        board: [esp32dev, esp32-s2, esp32-s3, esp32-c3]
        partition: [default, huge_app]
    
    steps:
      - name: ðŸ“¥ Checkout Repository
        uses: actions/checkout@v4
      
      - name: ðŸ Setup Python
        uses: actions/setup-python@v5
        with:
          python-version: '3.11'
          cache: 'pip'
      
      - name: ðŸ“¦ Cache PlatformIO
        uses: actions/cache@v4
        with:
          path: |
            ~/.platformio
            ~/.cache/pip
          key: ${{ runner.os }}-platformio-${{ hashFiles('**/platformio.ini') }}
          restore-keys: |
            ${{ runner.os }}-platformio-
      
      - name: âš™ï¸ Install PlatformIO Core
        run: |
          echo "âš™ï¸ Installing PlatformIO..."
          pip install --upgrade platformio
          pio --version
          echo "âœ… PlatformIO installed successfully"
      
      - name: ðŸ”§ Prepare Build Environment
        run: |
          echo "ðŸ”§ Setting up build environment..."
          
          # Rename source file if needed
          if [ -f "bara (1).cpp" ]; then
            mv "bara (1).cpp" bara.cpp
          fi
          
          # Create project structure
          mkdir -p src lib include data
          mv bara.cpp src/main.cpp 2>/dev/null || true
          
          echo "âœ… Build environment ready"
      
      - name: ðŸ“ Generate platformio.ini
        run: |
          cat > platformio.ini << 'EOL'
          ; â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          ; bara.cpp - ESP32 WiFi Security Testing Tool
          ; PlatformIO Configuration File
          ; â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

          [platformio]
          default_envs = ${{ matrix.board }}_${{ matrix.partition }}
          build_dir = ${PROJECT_DIR}/build
          
          ; â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          ; Common Configuration
          ; â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          [env]
          framework = arduino
          monitor_speed = 115200
          upload_speed = 921600
          monitor_filters = 
              esp32_exception_decoder
              time
              log2file
          
          ; Build Flags
          build_flags = 
              -D CORE_DEBUG_LEVEL=3
              -D ARDUINO_USB_CDC_ON_BOOT=1
              -D CONFIG_ARDUHAL_LOG_COLORS=1
              -Wall
              -Wextra
              -Os
              -ffunction-sections
              -fdata-sections
              -Wl,--gc-sections
          
          ; Required Libraries
          lib_deps = 
              ESP32-WiFiManager@^1.0.0
              ESP Async WebServer@^1.2.3
              AsyncTCP@^1.1.1
              ArduinoJson@^6.21.3
              ESPAsyncTCP@^1.2.2
              DNSServer
              WebServer
              WiFi
              FS
              SPIFFS
              Ticker
          
          ; Extra Scripts
          extra_scripts = 
              pre:scripts/pre_build.py
              post:scripts/post_build.py
          
          ; â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          ; ESP32 DevKit - Default Partition
          ; â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          [env:esp32dev_default]
          platform = espressif32@^6.5.0
          board = esp32dev
          board_build.partitions = default.csv
          board_build.filesystem = spiffs
          build_flags = 
              ${env.build_flags}
              -D BOARD_TYPE="ESP32-DEVKIT"
          
          ; â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          ; ESP32 DevKit - Huge App Partition (3MB APP)
          ; â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          [env:esp32dev_huge_app]
          platform = espressif32@^6.5.0
          board = esp32dev
          board_build.partitions = huge_app.csv
          board_build.filesystem = spiffs
          build_flags = 
              ${env.build_flags}
              -D BOARD_TYPE="ESP32-DEVKIT-HUGE"
          
          ; â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          ; ESP32-S2
          ; â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          [env:esp32-s2_default]
          platform = espressif32@^6.5.0
          board = esp32-s2-saola-1
          board_build.partitions = default.csv
          build_flags = 
              ${env.build_flags}
              -D BOARD_TYPE="ESP32-S2"
          
          [env:esp32-s2_huge_app]
          platform = espressif32@^6.5.0
          board = esp32-s2-saola-1
          board_build.partitions = huge_app.csv
          build_flags = 
              ${env.build_flags}
              -D BOARD_TYPE="ESP32-S2-HUGE"
          
          ; â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          ; ESP32-S3
          ; â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          [env:esp32-s3_default]
          platform = espressif32@^6.5.0
          board = esp32-s3-devkitc-1
          board_build.partitions = default.csv
          build_flags = 
              ${env.build_flags}
              -D BOARD_TYPE="ESP32-S3"
          
          [env:esp32-s3_huge_app]
          platform = espressif32@^6.5.0
          board = esp32-s3-devkitc-1
          board_build.partitions = huge_app.csv
          build_flags = 
              ${env.build_flags}
              -D BOARD_TYPE="ESP32-S3-HUGE"
          
          ; â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          ; ESP32-C3
          ; â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          [env:esp32-c3_default]
          platform = espressif32@^6.5.0
          board = esp32-c3-devkitm-1
          board_build.partitions = default.csv
          build_flags = 
              ${env.build_flags}
              -D BOARD_TYPE="ESP32-C3"
          
          [env:esp32-c3_huge_app]
          platform = espressif32@^6.5.0
          board = esp32-c3-devkitm-1
          board_build.partitions = huge_app.csv
          build_flags = 
              ${env.build_flags}
              -D BOARD_TYPE="ESP32-C3-HUGE"
          EOL
          
          echo "âœ… platformio.ini generated"
      
      - name: ðŸ“‹ Create Build Scripts
        run: |
          mkdir -p scripts
          
          # Pre-build script
          cat > scripts/pre_build.py << 'PYSCRIPT'
          Import("env")
          import os
          from datetime import datetime
          
          print("=" * 60)
          print("ðŸš€ bara.cpp - Pre-Build Script")
          print("=" * 60)
          
          # Add build timestamp
          build_time = datetime.now().strftime("%Y-%m-%d %H:%M:%S")
          env.Append(CPPDEFINES=[
              ("BUILD_TIMESTAMP", f'\\"{build_time}\\"'),
              ("GITHUB_BUILD", "1")
          ])
          
          print(f"â° Build Time: {build_time}")
          print(f"ðŸ—ï¸ Environment: {env['PIOENV']}")
          print("=" * 60)
          PYSCRIPT
          
          # Post-build script
          cat > scripts/post_build.py << 'PYSCRIPT'
          Import("env")
          import os
          import shutil
          from pathlib import Path
          
          def merge_bin(*args, **kwargs):
              print("=" * 60)
              print("ðŸ”§ bara.cpp - Post-Build Processing")
              print("=" * 60)
              
              # Get build directory
              build_dir = env.subst("$BUILD_DIR")
              firmware_source = os.path.join(build_dir, "firmware.bin")
              bootloader = os.path.join(env.subst("$PROJECT_DIR"), ".pio", "build", 
                                       env['PIOENV'], "bootloader.bin")
              partitions = os.path.join(env.subst("$PROJECT_DIR"), ".pio", "build", 
                                       env['PIOENV'], "partitions.bin")
              
              # Create output directory
              output_dir = os.path.join(env.subst("$PROJECT_DIR"), "firmware")
              os.makedirs(output_dir, exist_ok=True)
              
              # Copy individual binaries
              if os.path.exists(firmware_source):
                  print(f"ðŸ“¦ Copying firmware.bin...")
                  shutil.copy(firmware_source, os.path.join(output_dir, 
                             f"bara_{env['PIOENV']}_app.bin"))
              
              if os.path.exists(bootloader):
                  print(f"ðŸ“¦ Copying bootloader.bin...")
                  shutil.copy(bootloader, os.path.join(output_dir, 
                             f"bara_{env['PIOENV']}_bootloader.bin"))
              
              if os.path.exists(partitions):
                  print(f"ðŸ“¦ Copying partitions.bin...")
                  shutil.copy(partitions, os.path.join(output_dir, 
                             f"bara_{env['PIOENV']}_partitions.bin"))
              
              # Create flash instructions
              flash_cmd = f"""
          # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          # bara.cpp - Flash Instructions for {env['PIOENV']}
          # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
          
          # Using esptool.py:
          esptool.py --chip esp32 --port COM3 --baud 921600 \\
            --before default_reset --after hard_reset write_flash \\
            -z --flash_mode dio --flash_freq 80m --flash_size detect \\
            0x1000 bara_{env['PIOENV']}_bootloader.bin \\
            0x8000 bara_{env['PIOENV']}_partitions.bin \\
            0x10000 bara_{env['PIOENV']}_app.bin
          
          # Using PlatformIO:
          pio run -e {env['PIOENV']} -t upload
          
          # Using Arduino IDE / ESP Flash Download Tool:
          # - Bootloader: 0x1000
          # - Partitions: 0x8000
          # - Application: 0x10000
          """
              
              with open(os.path.join(output_dir, f"FLASH_INSTRUCTIONS_{env['PIOENV']}.txt"), 
                       'w') as f:
                  f.write(flash_cmd)
              
              print(f"âœ… Firmware files ready in: {output_dir}")
              print("=" * 60)
          
          env.AddPostAction("$BUILD_DIR/${PROGNAME}.bin", merge_bin)
          PYSCRIPT
          
          echo "âœ… Build scripts created"
      
      - name: ðŸ—ï¸ Build Firmware
        run: |
          echo "ðŸ—ï¸ Building firmware for ${{ matrix.board }} with ${{ matrix.partition }} partition..."
          pio run -e ${{ matrix.board }}_${{ matrix.partition }}
          echo "âœ… Build completed successfully"
      
      - name: ðŸ”§ Generate Merged Binary
        run: |
          echo "ðŸ”§ Creating merged binary..."
          
          BUILD_ENV="${{ matrix.board }}_${{ matrix.partition }}"
          BUILD_PATH=".pio/build/${BUILD_ENV}"
          OUTPUT_DIR="firmware"
          
          mkdir -p "${OUTPUT_DIR}"
          
          # Install esptool if not available
          pip install esptool
          
          # Merge binaries
          if [ -f "${BUILD_PATH}/bootloader.bin" ] && [ -f "${BUILD_PATH}/partitions.bin" ] && [ -f "${BUILD_PATH}/firmware.bin" ]; then
            echo "ðŸ“¦ Merging binaries..."
            
            python -m esptool --chip esp32 merge_bin \
              -o "${OUTPUT_DIR}/bara_${BUILD_ENV}_merged.bin" \
              --flash_mode dio \
              --flash_freq 80m \
              --flash_size 4MB \
              0x1000 "${BUILD_PATH}/bootloader.bin" \
              0x8000 "${BUILD_PATH}/partitions.bin" \
              0x10000 "${BUILD_PATH}/firmware.bin"
            
            echo "âœ… Merged binary created: bara_${BUILD_ENV}_merged.bin"
            
            # Flash at 0x0
            cp "${OUTPUT_DIR}/bara_${BUILD_ENV}_merged.bin" "${OUTPUT_DIR}/bara_${BUILD_ENV}_0x0.bin"
            echo "âœ… 0x0 flash file created"
          else
            echo "âš ï¸ Some binary files missing, creating partial merge..."
          fi
          
          # Create checksums
          cd "${OUTPUT_DIR}"
          sha256sum *.bin > checksums.txt
          cd -
          
          echo "âœ… All binaries prepared"
      
      - name: ðŸ“Š Build Information
        run: |
          echo "ðŸ“Š Build Information:"
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          echo "Board: ${{ matrix.board }}"
          echo "Partition: ${{ matrix.partition }}"
          echo "Build Time: $(date)"
          echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
          
          if [ -d "firmware" ]; then
            echo "ðŸ“¦ Generated Files:"
            ls -lh firmware/
            echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
            echo "ðŸ“‹ Checksums:"
            cat firmware/checksums.txt
          fi
      
      - name: ðŸ“¤ Upload Firmware Artifacts
        uses: actions/upload-artifact@v4
        with:
          name: bara-${{ matrix.board }}-${{ matrix.partition }}-firmware
          path: |
            firmware/*.bin
            firmware/*.txt
            firmware/checksums.txt
          retention-days: 30
      
      - name: ðŸ“¤ Upload Build Logs
        if: always()
        uses: actions/upload-artifact@v4
        with:
          name: build-logs-${{ matrix.board }}-${{ matrix.partition }}
          path: |
            .pio/build/**/output.log
            .pio/build/**/*.elf
          retention-days: 7

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # ðŸŽ‰ Create Release
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  release:
    name: ðŸŽ‰ Create Release
    needs: build
    if: github.event_name == 'push' && startsWith(github.ref, 'refs/tags/')
    runs-on: ubuntu-latest
    
    steps:
      - name: ðŸ“¥ Download All Artifacts
        uses: actions/download-artifact@v4
        with:
          path: release-artifacts
      
      - name: ðŸ“¦ Prepare Release Assets
        run: |
          mkdir -p release
          find release-artifacts -name "*.bin" -exec cp {} release/ \;
          find release-artifacts -name "checksums.txt" -exec cp {} release/ \;
          
          cd release
          zip -r bara-firmware-complete.zip *.bin *.txt
          cd -
      
      - name: ðŸš€ Create GitHub Release
        uses: softprops/action-gh-release@v1
        with:
          name: bara.cpp v${{ github.ref_name }}
          body: |
            # ðŸŽ‰ bara.cpp ESP32 WiFi Security Testing Tool
            
            ## ðŸ“¦ Release Information
            - **Version**: ${{ github.ref_name }}
            - **Build Date**: ${{ github.event.head_commit.timestamp }}
            - **Commit**: ${{ github.sha }}
            
            ## ðŸ“¥ Installation Instructions
            
            ### Flash using esptool.py (Recommended - 0x0 method):
            ```bash
            esptool.py --chip esp32 --port COM3 write_flash 0x0 bara_*_0x0.bin
            ```
            
            ### Flash using separated binaries:
            ```bash
            esptool.py --chip esp32 --port COM3 --baud 921600 write_flash \
              0x1000 bootloader.bin \
              0x8000 partitions.bin \
              0x10000 app.bin
            ```
            
            ## âš ï¸ Legal Notice
            This tool is for **educational purposes only**. Always ensure proper authorization before testing any networks.
            
            ## ðŸ”§ Supported Boards
            - ESP32 DevKit (Default & Huge App)
            - ESP32-S2
            - ESP32-S3
            - ESP32-C3
            
            ## ðŸ“ Changelog
            ${{ github.event.head_commit.message }}
          files: |
            release/*.zip
            release/*.bin
            release/checksums.txt
          draft: false
          prerelease: false
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}

  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  # ðŸ“Š Build Summary
  # â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
  summary:
    name: ðŸ“Š Build Summary
    needs: build
    if: always()
    runs-on: ubuntu-latest
    
    steps:
      - name: ðŸ“Š Generate Summary
        run: |
          echo "# ðŸš€ bara.cpp Build Summary" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "## Build Status" >> $GITHUB_STEP_SUMMARY
          echo "âœ… Build completed successfully" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "## Artifacts Generated" >> $GITHUB_STEP_SUMMARY
          echo "- ESP32 DevKit (Default & Huge App)" >> $GITHUB_STEP_SUMMARY
          echo "- ESP32-S2 (Default & Huge App)" >> $GITHUB_STEP_SUMMARY
          echo "- ESP32-S3 (Default & Huge App)" >> $GITHUB_STEP_SUMMARY
          echo "- ESP32-C3 (Default & Huge App)" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "## ðŸ“¥ Flash Instructions" >> $GITHUB_STEP_SUMMARY
          echo "\`\`\`bash" >> $GITHUB_STEP_SUMMARY
          echo "esptool.py --chip esp32 --port COM3 write_flash 0x0 bara_merged.bin" >> $GITHUB_STEP_SUMMARY
          echo "\`\`\`" >> $GITHUB_STEP_SUMMARY
          echo "" >> $GITHUB_STEP_SUMMARY
          echo "ðŸŽ‰ **Build completed at**: $(date)" >> $GITHUB_STEP_SUMMARY
